"use strict";var MD5=function(e){function t(e,t){return e<<t|e>>>32-t}function a(e,t){var a,r,n,o,i;return n=2147483648&e,o=2147483648&t,a=1073741824&e,r=1073741824&t,i=(1073741823&e)+(1073741823&t),a&r?2147483648^i^n^o:a|r?1073741824&i?3221225472^i^n^o:1073741824^i^n^o:i^n^o}function r(e,t,a){return e&t|~e&a}function n(e,t,a){return e&a|t&~a}function o(e,t,a){return e^t^a}function i(e,t,a){return t^(e|~a)}function l(e,n,o,i,l,s,c){return e=a(e,a(a(r(n,o,i),l),c)),a(t(e,s),n)}function s(e,r,o,i,l,s,c){return e=a(e,a(a(n(r,o,i),l),c)),a(t(e,s),r)}function c(e,r,n,i,l,s,c){return e=a(e,a(a(o(r,n,i),l),c)),a(t(e,s),r)}function p(e,r,n,o,l,s,c){return e=a(e,a(a(i(r,n,o),l),c)),a(t(e,s),r)}function u(e){for(var t,a=e.length,r=a+8,n=(r-r%64)/64,o=16*(n+1),i=Array(o-1),l=0,s=0;a>s;)t=(s-s%4)/4,l=s%4*8,i[t]=i[t]|e.charCodeAt(s)<<l,s++;return t=(s-s%4)/4,l=s%4*8,i[t]=i[t]|128<<l,i[o-2]=a<<3,i[o-1]=a>>>29,i}function d(e){var t,a,r="",n="";for(a=0;3>=a;a++)t=e>>>8*a&255,n="0"+t.toString(16),r+=n.substr(n.length-2,2);return r}function g(e){e=e.replace(/rn/g,"n");for(var t="",a=0;a<e.length;a++){var r=e.charCodeAt(a);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var f,m,h,y,w,v,C,P,S,$=Array(),b=7,T=12,M=17,O=22,I=5,U=9,A=14,E=20,G=4,L=11,D=16,q=23,N=6,F=10,x=15,k=21;for(e=g(e),$=u(e),v=1732584193,C=4023233417,P=2562383102,S=271733878,f=0;f<$.length;f+=16)m=v,h=C,y=P,w=S,v=l(v,C,P,S,$[f+0],b,3614090360),S=l(S,v,C,P,$[f+1],T,3905402710),P=l(P,S,v,C,$[f+2],M,606105819),C=l(C,P,S,v,$[f+3],O,3250441966),v=l(v,C,P,S,$[f+4],b,4118548399),S=l(S,v,C,P,$[f+5],T,1200080426),P=l(P,S,v,C,$[f+6],M,2821735955),C=l(C,P,S,v,$[f+7],O,4249261313),v=l(v,C,P,S,$[f+8],b,1770035416),S=l(S,v,C,P,$[f+9],T,2336552879),P=l(P,S,v,C,$[f+10],M,4294925233),C=l(C,P,S,v,$[f+11],O,2304563134),v=l(v,C,P,S,$[f+12],b,1804603682),S=l(S,v,C,P,$[f+13],T,4254626195),P=l(P,S,v,C,$[f+14],M,2792965006),C=l(C,P,S,v,$[f+15],O,1236535329),v=s(v,C,P,S,$[f+1],I,4129170786),S=s(S,v,C,P,$[f+6],U,3225465664),P=s(P,S,v,C,$[f+11],A,643717713),C=s(C,P,S,v,$[f+0],E,3921069994),v=s(v,C,P,S,$[f+5],I,3593408605),S=s(S,v,C,P,$[f+10],U,38016083),P=s(P,S,v,C,$[f+15],A,3634488961),C=s(C,P,S,v,$[f+4],E,3889429448),v=s(v,C,P,S,$[f+9],I,568446438),S=s(S,v,C,P,$[f+14],U,3275163606),P=s(P,S,v,C,$[f+3],A,4107603335),C=s(C,P,S,v,$[f+8],E,1163531501),v=s(v,C,P,S,$[f+13],I,2850285829),S=s(S,v,C,P,$[f+2],U,4243563512),P=s(P,S,v,C,$[f+7],A,1735328473),C=s(C,P,S,v,$[f+12],E,2368359562),v=c(v,C,P,S,$[f+5],G,4294588738),S=c(S,v,C,P,$[f+8],L,2272392833),P=c(P,S,v,C,$[f+11],D,1839030562),C=c(C,P,S,v,$[f+14],q,4259657740),v=c(v,C,P,S,$[f+1],G,2763975236),S=c(S,v,C,P,$[f+4],L,1272893353),P=c(P,S,v,C,$[f+7],D,4139469664),C=c(C,P,S,v,$[f+10],q,3200236656),v=c(v,C,P,S,$[f+13],G,681279174),S=c(S,v,C,P,$[f+0],L,3936430074),P=c(P,S,v,C,$[f+3],D,3572445317),C=c(C,P,S,v,$[f+6],q,76029189),v=c(v,C,P,S,$[f+9],G,3654602809),S=c(S,v,C,P,$[f+12],L,3873151461),P=c(P,S,v,C,$[f+15],D,530742520),C=c(C,P,S,v,$[f+2],q,3299628645),v=p(v,C,P,S,$[f+0],N,4096336452),S=p(S,v,C,P,$[f+7],F,1126891415),P=p(P,S,v,C,$[f+14],x,2878612391),C=p(C,P,S,v,$[f+5],k,4237533241),v=p(v,C,P,S,$[f+12],N,1700485571),S=p(S,v,C,P,$[f+3],F,2399980690),P=p(P,S,v,C,$[f+10],x,4293915773),C=p(C,P,S,v,$[f+1],k,2240044497),v=p(v,C,P,S,$[f+8],N,1873313359),S=p(S,v,C,P,$[f+15],F,4264355552),P=p(P,S,v,C,$[f+6],x,2734768916),C=p(C,P,S,v,$[f+13],k,1309151649),v=p(v,C,P,S,$[f+4],N,4149444226),S=p(S,v,C,P,$[f+11],F,3174756917),P=p(P,S,v,C,$[f+2],x,718787259),C=p(C,P,S,v,$[f+9],k,3951481745),v=a(v,m),C=a(C,h),P=a(P,y),S=a(S,w);var B=d(v)+d(C)+d(P)+d(S);return B.toLowerCase()},shuffleArray=function(e){for(var t,a,r=e.length;r;)a=Math.floor(Math.random()*r--),t=e[r],e[r]=e[a],e[a]=t;return e},validateEmail=function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},webqSupportedDivisions=["East Florida","West Florida","South Atlantic","North Florida","Mountain"],landingPageGallery=angular.module("landingPageGallery",["ngRoute","ngAnimate","LocalStorageModule","angular.filter","ngOnload"]);landingPageGallery.config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/main.html",controller:"mainCtrl",controllerAs:"main",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/debug",{templateUrl:"partials/debug.html",controller:"debugCtrl",controllerAs:"debug",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/tag",{templateUrl:"partials/tagtool.html",controller:"tagtoolCtrl",controllerAs:"tagtool",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/:shortCode",{templateUrl:"partials/detail.html",controller:"detailCtrl",controllerAs:"detail",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).otherwise({redirectTo:"/"})}]),landingPageGallery.config(["localStorageServiceProvider",function(e){e.setPrefix("webqLPG")}]),landingPageGallery.run(["$rootScope","$timeout","$window","localStorageService",function(e,t,a,r){var n=angular.element(document.getElementById("app-wrapper"));e.lpgUser=r.get("user"),e.userModal=!1,e.setUser=function(t){t.firstName&&t.lastName&&validateEmail(t.email)&&t.division&&(e.lpgUser=t,r.set("user",e.lpgUser),-1!==webqSupportedDivisions.indexOf(e.lpgUser.division)?e.webqSupported=!0:e.webqSupported=!1,e.hideUserModal())},e.$on("$routeChangeSuccess",function(){if(e.loadingView===!0){var r=document.getElementById("pageLoad");r.style.opacity="0",t(function(){r.style.display="none",e.loadingView=!1},300)}e.lpgUser?-1!==webqSupportedDivisions.indexOf(e.lpgUser.division)?e.webqSupported=!0:e.webqSupported=!1:t(function(){e.showUserModal()},3500),t(function(){a.scrollTo(0,0)},400)}),e.hideUserModal=function(){n.removeClass("full-blur").addClass("no-blur"),e.userModal=!1},e.showUserModal=function(){e.userModal=!0,n.removeClass("no-blur").addClass("full-blur")},e.appName="Landing Page Gallery"}]),landingPageGallery.controller("mainCtrl",["$routeParams","appdata","$filter","$scope","$rootScope","appCache",function(e,t,a,r,n,o){var i=this;i.filters=o.get("filters");for(var l=t.templates,s=t.campaigns,c=[],p=[],u=[],d=0;d<s.length;d++){var g=a("filter")(l,{id:s[d].templateId})[0];s[d].templateTitle=g.title,c=c.concat(s[d].topic),p=p.concat(s[d].type),u=u.concat(g)}c=a("unique")(c,"toString()"),p=a("unique")(p,"toString()"),u=a("unique")(u,"id"),c=a("orderBy")(c,"toString()"),p=a("orderBy")(p,"toString()"),u=a("orderBy")(u,"title"),i.campaigns=s,i.topics=c,i.types=p,i.templates=u,i.filterResults=function(){var e=a("filter")(s,{$:i.filters.quicksearch});i.campaigns=a("filter")(e,{topic:i.filters.topic||void 0,type:i.filters.type||void 0,templateId:i.filters.templateId||void 0},!0),o.set("filters",i.filters)},i.filterResults(),i.clearSearch=function(){i.campaigns=s;var e=i.filters;Object.keys(e).forEach(function(t,a,r){e[t]=""}),i.filters=e},i.slide=function(e){n.pageTransition=e}}]),landingPageGallery.controller("detailCtrl",["$window","$sce","$routeParams","appdata","$filter","$scope","$rootScope","$location","emailService",function(e,t,a,r,n,o,i,l,s){var c=this,p=r.templates,u=r.campaigns,d=a.shortCode,g=n("filter")(u,{shortCode:d})[0],f=g.templateId,m=n("filter")(p,{id:parseInt(f)},!0)[0],h=n("filter")(u,{templateId:f,shortCode:"!"+d},!0);h=shuffleArray(h),c.iframeURL=t.trustAsResourceUrl(g.url),c.template=m,c.campaign=g,c.otherCampaigns=h,c.renderHTML=function(e){var a=angular.element("<textarea />").html(e).text();return t.trustAsHtml(a)},c.sendEmail=function(){var e=l.protocol()+"://"+l.host()+"/lpg/",t=e+"process-form.dot",a=t+"?submitted=true",r=e+"#/"+c.campaign.shortCode,n="no-reply@"+l.host(),o={from:n,to:"cody.merrill@hcahealthcare.com",subject:"Landing Page Gallery - Request",returnUrl:a,errorURL:t,formType:"Landing Page Gallery - Request a new landing page",url:e,"First Name":i.lpgUser.firstName,"Last Name":i.lpgUser.lastName,Division:i.lpgUser.division,Email:i.lpgUser.email,"Landing Page":r,order:"subject,First Name,Last Name,Division,Email,Landing Page,url"};s.send(o)},m.custom?c.customFlag="Custom":c.customFlag="Standard",o.windowWidth=e.innerWidth,angular.element(e).bind("resize",function(){o.windowWidth=e.innerWidth,o.$digest()}),c.slide=function(e){i.pageTransition=e},c.frameLoaded=function(){document.getElementById("campaign-frame").style.display="block",document.getElementById("iframe-loader").style.display="none"}}]),landingPageGallery.controller("debugCtrl",["appdata",function(e){ctrl.templates=e.templates,ctrl.campaigns=e.campaigns,ctrl.printdata=e}]),landingPageGallery.controller("tagtoolCtrl",["appdata",function(e){ctrl.templates=e.templates,ctrl.campaigns=e.campaigns}]),landingPageGallery.factory("fetchData",["$q","$http","$rootScope",function(e,t,a){function r(){var r=e.defer();return o?r.resolve(o):(a.loadingView=!0,a.pageTransition="fadepage",t({method:"GET",url:"http://web-q-hospital.prod.ehc.com/global/webq/report/campaign-pages/campaign-pages.json"}).then(function(e){a.dataFetched=!0,console.log("Data Fetched"),o=e.data;for(var t=0;t<o.campaigns.length;t++)o.campaigns[t].shortCode=MD5(o.campaigns[t].id).substring(0,6);o.campaigns=shuffleArray(o.campaigns),a.$watch("splashFinished",function(){return a.splashFinished?(console.log("Animation Complete"),r.resolve(o)):void 0}),a.$watch("skipIntro",function(){return a.skipIntro?(console.log("Skipping Introduction"),r.resolve(o)):void 0})},function(e){r.reject(e)})),r.promise}function n(){o=null}var o;return{getCampaigns:r,clearCache:n,cache:o}}]),landingPageGallery.factory("emailService",["$http","$rootScope",function(e,t){function a(t){e({method:"POST",url:"/dotCMS/sendEmail",data:t,responseType:"json"}).then(function(e){console.log(e)},function(e){console.log(e)})}return{send:a}}]),landingPageGallery.factory("cacher",["$cacheFactory",function(e){return e("cacher")}]),landingPageGallery.factory("appCache",["cacher",function(e){return{get:function(t){var a=e.get(t);return a?a:""},set:function(t,a){e.put(t,a)},clear:function(t){e.put(t,"")}}}]),landingPageGallery.directive("splashAnimate",["$rootScope",function(e){return{restrict:"A",link:function(t,a,r){a.on("load",function(){function t(){e.$apply(function(){e.splashFinished=!0,console.log("Intro Played Through")}),e.dataFetched||p.restart()}e.$apply(function(){e.splashFinished=!1,e.showLoadText=!0});var a=this.contentDocument,r=a.getElementsByClassName("cir"),n=a.getElementsByClassName("icon-wrap"),o=a.getElementsByClassName("title"),i=a.getElementsByClassName("sub"),l=.8,s="-="+7*l/10,c="-="+1*l/2,p=new TimelineMax({repeat:0,yoyo:!1,repeatDelay:l,onComplete:t});p.to(r[0],l,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(n[0],.4*l,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},s),p.to(o[0],.4*l,{opacity:"1",ease:Power1.easeIn},s),p.to(i[0],.4*l,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[0],i[0]],.5*l,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*l),p.appendMultiple(TweenMax.allTo([r[0],n[0]],1.5*l,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),p.to(r[1],l,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(n[1],.4*l,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},s),p.to(o[1],.4*l,{opacity:"1",ease:Power1.easeIn},s),p.to(i[1],.4*l,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[1],i[1]],.5*l,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*l),p.appendMultiple(TweenMax.allTo([r[1],n[1]],1.5*l,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),p.to(r[2],l,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(n[2],.4*l,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},s),p.to(o[2],.4*l,{opacity:"1",ease:Power1.easeIn},s),p.to(i[2],.4*l,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[2],i[2]],.5*l,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*l),p.appendMultiple(TweenMax.allTo([r[2],n[2]],1.5*l,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),e.$watch("skipIntro",function(){e.skipIntro&&(p.stop(),console.log("Stopping Animation"))})})}}}]);