"use strict";var MD5=function(e){function t(e,t){return e<<t|e>>>32-t}function a(e,t){var a,n,r,o,i;return r=2147483648&e,o=2147483648&t,a=1073741824&e,n=1073741824&t,i=(1073741823&e)+(1073741823&t),a&n?2147483648^i^r^o:a|n?1073741824&i?3221225472^i^r^o:1073741824^i^r^o:i^r^o}function n(e,t,a){return e&t|~e&a}function r(e,t,a){return e&a|t&~a}function o(e,t,a){return e^t^a}function i(e,t,a){return t^(e|~a)}function s(e,r,o,i,s,l,c){return e=a(e,a(a(n(r,o,i),s),c)),a(t(e,l),r)}function l(e,n,o,i,s,l,c){return e=a(e,a(a(r(n,o,i),s),c)),a(t(e,l),n)}function c(e,n,r,i,s,l,c){return e=a(e,a(a(o(n,r,i),s),c)),a(t(e,l),n)}function p(e,n,r,o,s,l,c){return e=a(e,a(a(i(n,r,o),s),c)),a(t(e,l),n)}function u(e){for(var t,a=e.length,n=a+8,r=(n-n%64)/64,o=16*(r+1),i=Array(o-1),s=0,l=0;a>l;)t=(l-l%4)/4,s=l%4*8,i[t]=i[t]|e.charCodeAt(l)<<s,l++;return t=(l-l%4)/4,s=l%4*8,i[t]=i[t]|128<<s,i[o-2]=a<<3,i[o-1]=a>>>29,i}function g(e){var t,a,n="",r="";for(a=0;3>=a;a++)t=e>>>8*a&255,r="0"+t.toString(16),n+=r.substr(r.length-2,2);return n}function f(e){e=e.replace(/rn/g,"n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}var h,d,m,y,w,C,v,P,$,T=Array(),I=7,O=12,M=17,A=22,S=5,k=9,G=14,b=20,D=4,E=11,x=16,F=23,L=6,q=10,N=15,B=21;for(e=f(e),T=u(e),C=1732584193,v=4023233417,P=2562383102,$=271733878,h=0;h<T.length;h+=16)d=C,m=v,y=P,w=$,C=s(C,v,P,$,T[h+0],I,3614090360),$=s($,C,v,P,T[h+1],O,3905402710),P=s(P,$,C,v,T[h+2],M,606105819),v=s(v,P,$,C,T[h+3],A,3250441966),C=s(C,v,P,$,T[h+4],I,4118548399),$=s($,C,v,P,T[h+5],O,1200080426),P=s(P,$,C,v,T[h+6],M,2821735955),v=s(v,P,$,C,T[h+7],A,4249261313),C=s(C,v,P,$,T[h+8],I,1770035416),$=s($,C,v,P,T[h+9],O,2336552879),P=s(P,$,C,v,T[h+10],M,4294925233),v=s(v,P,$,C,T[h+11],A,2304563134),C=s(C,v,P,$,T[h+12],I,1804603682),$=s($,C,v,P,T[h+13],O,4254626195),P=s(P,$,C,v,T[h+14],M,2792965006),v=s(v,P,$,C,T[h+15],A,1236535329),C=l(C,v,P,$,T[h+1],S,4129170786),$=l($,C,v,P,T[h+6],k,3225465664),P=l(P,$,C,v,T[h+11],G,643717713),v=l(v,P,$,C,T[h+0],b,3921069994),C=l(C,v,P,$,T[h+5],S,3593408605),$=l($,C,v,P,T[h+10],k,38016083),P=l(P,$,C,v,T[h+15],G,3634488961),v=l(v,P,$,C,T[h+4],b,3889429448),C=l(C,v,P,$,T[h+9],S,568446438),$=l($,C,v,P,T[h+14],k,3275163606),P=l(P,$,C,v,T[h+3],G,4107603335),v=l(v,P,$,C,T[h+8],b,1163531501),C=l(C,v,P,$,T[h+13],S,2850285829),$=l($,C,v,P,T[h+2],k,4243563512),P=l(P,$,C,v,T[h+7],G,1735328473),v=l(v,P,$,C,T[h+12],b,2368359562),C=c(C,v,P,$,T[h+5],D,4294588738),$=c($,C,v,P,T[h+8],E,2272392833),P=c(P,$,C,v,T[h+11],x,1839030562),v=c(v,P,$,C,T[h+14],F,4259657740),C=c(C,v,P,$,T[h+1],D,2763975236),$=c($,C,v,P,T[h+4],E,1272893353),P=c(P,$,C,v,T[h+7],x,4139469664),v=c(v,P,$,C,T[h+10],F,3200236656),C=c(C,v,P,$,T[h+13],D,681279174),$=c($,C,v,P,T[h+0],E,3936430074),P=c(P,$,C,v,T[h+3],x,3572445317),v=c(v,P,$,C,T[h+6],F,76029189),C=c(C,v,P,$,T[h+9],D,3654602809),$=c($,C,v,P,T[h+12],E,3873151461),P=c(P,$,C,v,T[h+15],x,530742520),v=c(v,P,$,C,T[h+2],F,3299628645),C=p(C,v,P,$,T[h+0],L,4096336452),$=p($,C,v,P,T[h+7],q,1126891415),P=p(P,$,C,v,T[h+14],N,2878612391),v=p(v,P,$,C,T[h+5],B,4237533241),C=p(C,v,P,$,T[h+12],L,1700485571),$=p($,C,v,P,T[h+3],q,2399980690),P=p(P,$,C,v,T[h+10],N,4293915773),v=p(v,P,$,C,T[h+1],B,2240044497),C=p(C,v,P,$,T[h+8],L,1873313359),$=p($,C,v,P,T[h+15],q,4264355552),P=p(P,$,C,v,T[h+6],N,2734768916),v=p(v,P,$,C,T[h+13],B,1309151649),C=p(C,v,P,$,T[h+4],L,4149444226),$=p($,C,v,P,T[h+11],q,3174756917),P=p(P,$,C,v,T[h+2],N,718787259),v=p(v,P,$,C,T[h+9],B,3951481745),C=a(C,d),v=a(v,m),P=a(P,y),$=a($,w);var U=g(C)+g(v)+g(P)+g($);return U.toLowerCase()},shuffleArray=function(e){for(var t,a,n=e.length;n;)a=Math.floor(Math.random()*n--),t=e[n],e[n]=e[a],e[a]=t;return e},landingPageGallery=angular.module("landingPageGallery",["ngRoute","ngAnimate","angular.filter","ngOnload"]);landingPageGallery.config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/main.html",controller:"mainCtrl",controllerAs:"main",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/debug",{templateUrl:"partials/debug.html",controller:"debugCtrl",controllerAs:"debug",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/tag",{templateUrl:"partials/tagtool.html",controller:"tagtoolCtrl",controllerAs:"tagtool",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/:shortCode",{templateUrl:"partials/detail.html",controller:"detailCtrl",controllerAs:"detail",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).otherwise({redirectTo:"/"})}]),landingPageGallery.run(["$rootScope","$timeout","$window",function(e,t,a){e.$on("$routeChangeSuccess",function(){if(e.loadingView===!0){var n=document.getElementById("pageLoad");n.style.opacity="0",t(function(){n.style.display="none"},300)}e.loadingView=!1,t(function(){a.scrollTo(0,0)},400)}),e.appName="Landing Page Gallery"}]),landingPageGallery.controller("mainCtrl",["$routeParams","appdata","$filter","$scope","$rootScope","searchParams",function(e,t,a,n,r,o){this.filters=o.get("filters"),this.quicksearch=o.get("quicksearch");for(var i=t.templates,s=t.campaigns,l=[],c=[],p=[],u=0;u<s.length;u++){var g=a("filter")(i,{id:s[u].templateId})[0];s[u].templateTitle=g.title,l=l.concat(s[u].topic),c=c.concat(s[u].type),p=p.concat(g)}this.campaigns=s,this.topics=l,this.types=c,this.templates=p,this.filterResults=function(){var e=a("filter")(s,{$:this.quicksearch});this.campaigns=a("filter")(e,{topic:this.filters.topic||void 0,type:this.filters.type||void 0,templateId:this.filters.templateId||void 0},!0),o.set("filters",this.filters),o.set("quicksearch",this.quicksearch)},this.filterResults(),this.clearSearch=function(){this.campaigns=s,this.filters.topic="",this.filters.type="",this.filters.templateId="",this.quicksearch=""},this.slide=function(e){r.pageTransition=e}}]),landingPageGallery.controller("detailCtrl",["$window","$sce","$routeParams","appdata","$filter","$scope","$rootScope",function(e,t,a,n,r,o,i){var s=n.templates,l=n.campaigns,c=a.shortCode,p=r("filter")(l,{shortCode:c})[0],u=p.templateId,g=r("filter")(s,{id:parseInt(u)},!0)[0],f=r("filter")(l,{templateId:u,shortCode:"!"+c},!0);f=shuffleArray(f),this.iframeURL=t.trustAsResourceUrl(p.url),this.template=g,this.campaign=p,this.otherCampaigns=f,this.renderHTML=function(e){var a=angular.element("<textarea />").html(e).text();return t.trustAsHtml(a)},g.custom?this.customFlag="Custom":this.customFlag="Standard",o.windowWidth=e.innerWidth,angular.element(e).bind("resize",function(){o.windowWidth=e.innerWidth,o.$digest()}),this.slide=function(e){i.pageTransition=e},this.frameLoaded=function(){document.getElementById("campaign-frame").style.display="block",document.getElementById("iframe-loader").style.display="none"}}]),landingPageGallery.controller("debugCtrl",["appdata",function(e){this.templates=e.templates,this.campaigns=e.campaigns,this.printdata=e}]),landingPageGallery.controller("tagtoolCtrl",["appdata",function(e){this.templates=e.templates,this.campaigns=e.campaigns}]),landingPageGallery.factory("fetchData",["$q","$http","$rootScope",function(e,t,a){function n(){var n=e.defer();return o?n.resolve(o):(a.loadingView=!0,a.pageTransition="fadepage",t({method:"GET",url:"http://web-q-hospital.prod.ehc.com/global/webq/report/campaign-pages/campaign-pages.json"}).then(function(e){a.dataFetched=!0,console.log("Data Fetched"),o=e.data;for(var t=o.campaigns,r=0;r<t.length;r++)t[r].shortCode=MD5(t[r].id).substring(0,6);a.$watch("splashFinished",function(){return a.splashFinished?(console.log("Animation Complete"),n.resolve(o)):void 0}),a.$watch("skipIntro",function(){return a.skipIntro?(console.log("Skipping Introduction"),n.resolve(o)):void 0})},function(e){n.reject(e)})),n.promise}function r(){o=null}var o;return{getCampaigns:n,clearCache:r,cache:o}}]),landingPageGallery.factory("searchCache",["$cacheFactory",function(e){return e("searchCache")}]),landingPageGallery.factory("searchParams",["searchCache",function(e){return{get:function(t){var a=e.get(t);return a?a:""},set:function(t,a){e.put(t,a)},clear:function(t){e.put(t,"")}}}]),landingPageGallery.directive("splashAnimate",["$rootScope",function(e){return{restrict:"A",link:function(t,a,n){a.on("load",function(){function t(){e.$apply(function(){e.splashFinished=!0,console.log("Intro Played Through")}),e.dataFetched||p.restart()}e.$apply(function(){e.splashFinished=!1,e.showLoadText=!0});var a=this.contentDocument,n=a.getElementsByClassName("cir"),r=a.getElementsByClassName("icon-wrap"),o=a.getElementsByClassName("title"),i=a.getElementsByClassName("sub"),s=.8,l="-="+7*s/10,c="-="+1*s/2,p=new TimelineMax({repeat:0,yoyo:!1,repeatDelay:s,onComplete:t});p.to(n[0],s,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(r[0],.4*s,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},l),p.to(o[0],.4*s,{opacity:"1",ease:Power1.easeIn},l),p.to(i[0],.4*s,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[0],i[0]],.5*s,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*s),p.appendMultiple(TweenMax.allTo([n[0],r[0]],1.5*s,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),p.to(n[1],s,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(r[1],.4*s,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},l),p.to(o[1],.4*s,{opacity:"1",ease:Power1.easeIn},l),p.to(i[1],.4*s,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[1],i[1]],.5*s,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*s),p.appendMultiple(TweenMax.allTo([n[1],r[1]],1.5*s,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),p.to(n[2],s,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(r[2],.4*s,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},l),p.to(o[2],.4*s,{opacity:"1",ease:Power1.easeIn},l),p.to(i[2],.4*s,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[2],i[2]],.5*s,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*s),p.appendMultiple(TweenMax.allTo([n[2],r[2]],1.5*s,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),e.$watch("skipIntro",function(){e.skipIntro&&(p.stop(),console.log("Stopping Animation"))})})}}}]);