"use strict";var MD5=function(e){function t(e,t){return e<<t|e>>>32-t}function a(e,t){var a,n,r,o,i;return r=2147483648&e,o=2147483648&t,a=1073741824&e,n=1073741824&t,i=(1073741823&e)+(1073741823&t),a&n?2147483648^i^r^o:a|n?1073741824&i?3221225472^i^r^o:1073741824^i^r^o:i^r^o}function n(e,t,a){return e&t|~e&a}function r(e,t,a){return e&a|t&~a}function o(e,t,a){return e^t^a}function i(e,t,a){return t^(e|~a)}function l(e,r,o,i,l,s,c){return e=a(e,a(a(n(r,o,i),l),c)),a(t(e,s),r)}function s(e,n,o,i,l,s,c){return e=a(e,a(a(r(n,o,i),l),c)),a(t(e,s),n)}function c(e,n,r,i,l,s,c){return e=a(e,a(a(o(n,r,i),l),c)),a(t(e,s),n)}function p(e,n,r,o,l,s,c){return e=a(e,a(a(i(n,r,o),l),c)),a(t(e,s),n)}function u(e){for(var t,a=e.length,n=a+8,r=(n-n%64)/64,o=16*(r+1),i=Array(o-1),l=0,s=0;a>s;)t=(s-s%4)/4,l=s%4*8,i[t]=i[t]|e.charCodeAt(s)<<l,s++;return t=(s-s%4)/4,l=s%4*8,i[t]=i[t]|128<<l,i[o-2]=a<<3,i[o-1]=a>>>29,i}function g(e){var t,a,n="",r="";for(a=0;3>=a;a++)t=e>>>8*a&255,r="0"+t.toString(16),n+=r.substr(r.length-2,2);return n}function f(e){e=e.replace(/rn/g,"n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}var d,m,h,y,w,C,v,P,$,T=Array(),I=7,O=12,M=17,A=22,S=5,b=9,D=14,k=20,G=4,E=11,x=16,L=23,F=6,N=10,B=15,U=21;for(e=f(e),T=u(e),C=1732584193,v=4023233417,P=2562383102,$=271733878,d=0;d<T.length;d+=16)m=C,h=v,y=P,w=$,C=l(C,v,P,$,T[d+0],I,3614090360),$=l($,C,v,P,T[d+1],O,3905402710),P=l(P,$,C,v,T[d+2],M,606105819),v=l(v,P,$,C,T[d+3],A,3250441966),C=l(C,v,P,$,T[d+4],I,4118548399),$=l($,C,v,P,T[d+5],O,1200080426),P=l(P,$,C,v,T[d+6],M,2821735955),v=l(v,P,$,C,T[d+7],A,4249261313),C=l(C,v,P,$,T[d+8],I,1770035416),$=l($,C,v,P,T[d+9],O,2336552879),P=l(P,$,C,v,T[d+10],M,4294925233),v=l(v,P,$,C,T[d+11],A,2304563134),C=l(C,v,P,$,T[d+12],I,1804603682),$=l($,C,v,P,T[d+13],O,4254626195),P=l(P,$,C,v,T[d+14],M,2792965006),v=l(v,P,$,C,T[d+15],A,1236535329),C=s(C,v,P,$,T[d+1],S,4129170786),$=s($,C,v,P,T[d+6],b,3225465664),P=s(P,$,C,v,T[d+11],D,643717713),v=s(v,P,$,C,T[d+0],k,3921069994),C=s(C,v,P,$,T[d+5],S,3593408605),$=s($,C,v,P,T[d+10],b,38016083),P=s(P,$,C,v,T[d+15],D,3634488961),v=s(v,P,$,C,T[d+4],k,3889429448),C=s(C,v,P,$,T[d+9],S,568446438),$=s($,C,v,P,T[d+14],b,3275163606),P=s(P,$,C,v,T[d+3],D,4107603335),v=s(v,P,$,C,T[d+8],k,1163531501),C=s(C,v,P,$,T[d+13],S,2850285829),$=s($,C,v,P,T[d+2],b,4243563512),P=s(P,$,C,v,T[d+7],D,1735328473),v=s(v,P,$,C,T[d+12],k,2368359562),C=c(C,v,P,$,T[d+5],G,4294588738),$=c($,C,v,P,T[d+8],E,2272392833),P=c(P,$,C,v,T[d+11],x,1839030562),v=c(v,P,$,C,T[d+14],L,4259657740),C=c(C,v,P,$,T[d+1],G,2763975236),$=c($,C,v,P,T[d+4],E,1272893353),P=c(P,$,C,v,T[d+7],x,4139469664),v=c(v,P,$,C,T[d+10],L,3200236656),C=c(C,v,P,$,T[d+13],G,681279174),$=c($,C,v,P,T[d+0],E,3936430074),P=c(P,$,C,v,T[d+3],x,3572445317),v=c(v,P,$,C,T[d+6],L,76029189),C=c(C,v,P,$,T[d+9],G,3654602809),$=c($,C,v,P,T[d+12],E,3873151461),P=c(P,$,C,v,T[d+15],x,530742520),v=c(v,P,$,C,T[d+2],L,3299628645),C=p(C,v,P,$,T[d+0],F,4096336452),$=p($,C,v,P,T[d+7],N,1126891415),P=p(P,$,C,v,T[d+14],B,2878612391),v=p(v,P,$,C,T[d+5],U,4237533241),C=p(C,v,P,$,T[d+12],F,1700485571),$=p($,C,v,P,T[d+3],N,2399980690),P=p(P,$,C,v,T[d+10],B,4293915773),v=p(v,P,$,C,T[d+1],U,2240044497),C=p(C,v,P,$,T[d+8],F,1873313359),$=p($,C,v,P,T[d+15],N,4264355552),P=p(P,$,C,v,T[d+6],B,2734768916),v=p(v,P,$,C,T[d+13],U,1309151649),C=p(C,v,P,$,T[d+4],F,4149444226),$=p($,C,v,P,T[d+11],N,3174756917),P=p(P,$,C,v,T[d+2],B,718787259),v=p(v,P,$,C,T[d+9],U,3951481745),C=a(C,m),v=a(v,h),P=a(P,y),$=a($,w);var q=g(C)+g(v)+g(P)+g($);return q.toLowerCase()},shuffleArray=function(e){for(var t,a,n=e.length;n;)a=Math.floor(Math.random()*n--),t=e[n],e[n]=e[a],e[a]=t;return e},landingPageGallery=angular.module("landingPageGallery",["ngRoute","ngAnimate","angular.filter","ngOnload"]);landingPageGallery.config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/main.html",controller:"mainCtrl",controllerAs:"main",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/debug",{templateUrl:"partials/debug.html",controller:"debugCtrl",controllerAs:"debug",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/tag",{templateUrl:"partials/tagtool.html",controller:"tagtoolCtrl",controllerAs:"tagtool",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/:shortCode",{templateUrl:"partials/detail.html",controller:"detailCtrl",controllerAs:"detail",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).otherwise({redirectTo:"/"})}]),landingPageGallery.run(["$rootScope","$timeout","$window",function(e,t,a){e.$on("$routeChangeSuccess",function(){if(e.loadingView===!0){var n=document.getElementById("pageLoad");n.style.opacity="0",t(function(){n.style.display="none"},300)}e.loadingView=!1,t(function(){a.scrollTo(0,0)},400)}),e.appName="Landing Page Gallery"}]),landingPageGallery.controller("mainCtrl",["$routeParams","appdata","$filter","$scope","$rootScope",function(e,t,a,n,r){for(var o=t.templates,i=t.campaigns,l=[],s=[],c=0;c<i.length;c++){var p=a("filter")(o,{id:i[c].templateId})[0];i[c].templateTitle=p.title,l=l.concat(i[c].topic),s=s.concat(i[c].type)}this.campaigns=i,this.topics=l,this.types=s,this.templates=o,this.filterResults=function(){var e=a("filter")(i,{$:this.quicksearch});this.campaigns=a("filter")(e,{topic:this.filters.topic||void 0,type:this.filters.type||void 0,templateId:this.filters.templateId||void 0},!0)},this.clearSearch=function(){this.campaigns=i,this.filters.topic="",this.filters.type="",this.filters.templateId="",this.quicksearch=""},this.slide=function(e){r.pageTransition=e}}]),landingPageGallery.controller("detailCtrl",["$window","$sce","$routeParams","appdata","$filter","$scope","$rootScope",function(e,t,a,n,r,o,i){var l=n.templates,s=n.campaigns,c=a.shortCode,p=r("filter")(s,{shortCode:c})[0],u=p.templateId,g=r("filter")(l,{id:parseInt(u)},!0)[0],f=r("filter")(s,{templateId:u,shortCode:"!"+c},!0);f=shuffleArray(f),this.iframeURL=t.trustAsResourceUrl(p.url),this.template=g,this.campaign=p,this.otherCampaigns=f,this.renderHTML=function(e){var a=angular.element("<textarea />").html(e).text();return t.trustAsHtml(a)},g.custom?this.customFlag="Custom":this.customFlag="Standard",o.windowWidth=e.innerWidth,angular.element(e).bind("resize",function(){o.windowWidth=e.innerWidth,o.$digest()}),this.slide=function(e){i.pageTransition=e},this.frameLoaded=function(){document.getElementById("campaign-frame").style.display="block",document.getElementById("iframe-loader").style.display="none"}}]),landingPageGallery.controller("debugCtrl",["appdata",function(e){this.templates=e.templates,this.campaigns=e.campaigns,this.printdata=e}]),landingPageGallery.controller("tagtoolCtrl",["appdata",function(e){this.templates=e.templates,this.campaigns=e.campaigns}]),landingPageGallery.factory("fetchData",["$q","$http","$rootScope",function(e,t,a){function n(){var n=e.defer();return o?n.resolve(o):(a.loadingView=!0,a.pageTransition="fadepage",t({method:"GET",url:"http://web-q-hospital.prod.ehc.com/global/webq/report/campaign-pages/campaign-pages.json"}).then(function(e){a.dataFetched=!0,console.log("Data Fetched"),o=e.data;for(var t=o.campaigns,r=0;r<t.length;r++)t[r].shortCode=MD5(t[r].id).substring(0,6);a.$watch("splashFinished",function(){return a.splashFinished?(console.log("Animation Complete"),n.resolve(o)):void 0}),a.$watch("skipIntro",function(){return a.skipIntro?(console.log("Skipping Introduction"),n.resolve(o)):void 0})},function(e){n.reject(e)})),n.promise}function r(){o=null}var o;return{getCampaigns:n,clearCache:r,cache:o}}]),landingPageGallery.directive("splashAnimate",["$rootScope",function(e){return{restrict:"A",link:function(t,a,n){a.on("load",function(){function t(){e.$apply(function(){e.splashFinished=!0,console.log("Intro Played Through")}),e.dataFetched||p.restart()}e.$apply(function(){e.splashFinished=!1,e.showLoadText=!0});var a=this.contentDocument,n=a.getElementsByClassName("cir"),r=a.getElementsByClassName("icon-wrap"),o=a.getElementsByClassName("title"),i=a.getElementsByClassName("sub"),l=.8,s="-="+7*l/10,c="-="+1*l/2,p=new TimelineMax({repeat:0,yoyo:!1,repeatDelay:l,onComplete:t});p.to(n[0],l,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(r[0],.4*l,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},s),p.to(o[0],.4*l,{opacity:"1",ease:Power1.easeIn},s),p.to(i[0],.4*l,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[0],i[0]],.5*l,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*l),p.appendMultiple(TweenMax.allTo([n[0],r[0]],1.5*l,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),p.to(n[1],l,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(r[1],.4*l,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},s),p.to(o[1],.4*l,{opacity:"1",ease:Power1.easeIn},s),p.to(i[1],.4*l,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[1],i[1]],.5*l,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*l),p.appendMultiple(TweenMax.allTo([n[1],r[1]],1.5*l,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),p.to(n[2],l,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(r[2],.4*l,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},s),p.to(o[2],.4*l,{opacity:"1",ease:Power1.easeIn},s),p.to(i[2],.4*l,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[2],i[2]],.5*l,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*l),p.appendMultiple(TweenMax.allTo([n[2],r[2]],1.5*l,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),e.$watch("skipIntro",function(){e.skipIntro&&(p.stop(),console.log("Stopping Animation"))})})}}}]);