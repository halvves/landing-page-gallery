"use strict";var MD5=function(e){function t(e,t){return e<<t|e>>>32-t}function a(e,t){var a,n,r,o,i;return r=2147483648&e,o=2147483648&t,a=1073741824&e,n=1073741824&t,i=(1073741823&e)+(1073741823&t),a&n?2147483648^i^r^o:a|n?1073741824&i?3221225472^i^r^o:1073741824^i^r^o:i^r^o}function n(e,t,a){return e&t|~e&a}function r(e,t,a){return e&a|t&~a}function o(e,t,a){return e^t^a}function i(e,t,a){return t^(e|~a)}function l(e,r,o,i,l,s,c){return e=a(e,a(a(n(r,o,i),l),c)),a(t(e,s),r)}function s(e,n,o,i,l,s,c){return e=a(e,a(a(r(n,o,i),l),c)),a(t(e,s),n)}function c(e,n,r,i,l,s,c){return e=a(e,a(a(o(n,r,i),l),c)),a(t(e,s),n)}function p(e,n,r,o,l,s,c){return e=a(e,a(a(i(n,r,o),l),c)),a(t(e,s),n)}function u(e){for(var t,a=e.length,n=a+8,r=(n-n%64)/64,o=16*(r+1),i=Array(o-1),l=0,s=0;a>s;)t=(s-s%4)/4,l=s%4*8,i[t]=i[t]|e.charCodeAt(s)<<l,s++;return t=(s-s%4)/4,l=s%4*8,i[t]=i[t]|128<<l,i[o-2]=a<<3,i[o-1]=a>>>29,i}function g(e){var t,a,n="",r="";for(a=0;3>=a;a++)t=e>>>8*a&255,r="0"+t.toString(16),n+=r.substr(r.length-2,2);return n}function f(e){e=e.replace(/rn/g,"n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}var d,h,m,y,v,w,C,P,S,$=Array(),T=7,I=12,O=17,D=22,b=5,M=9,A=14,G=20,E=4,k=11,L=16,x=23,B=6,F=10,q=15,N=21;for(e=f(e),$=u(e),w=1732584193,C=4023233417,P=2562383102,S=271733878,d=0;d<$.length;d+=16)h=w,m=C,y=P,v=S,w=l(w,C,P,S,$[d+0],T,3614090360),S=l(S,w,C,P,$[d+1],I,3905402710),P=l(P,S,w,C,$[d+2],O,606105819),C=l(C,P,S,w,$[d+3],D,3250441966),w=l(w,C,P,S,$[d+4],T,4118548399),S=l(S,w,C,P,$[d+5],I,1200080426),P=l(P,S,w,C,$[d+6],O,2821735955),C=l(C,P,S,w,$[d+7],D,4249261313),w=l(w,C,P,S,$[d+8],T,1770035416),S=l(S,w,C,P,$[d+9],I,2336552879),P=l(P,S,w,C,$[d+10],O,4294925233),C=l(C,P,S,w,$[d+11],D,2304563134),w=l(w,C,P,S,$[d+12],T,1804603682),S=l(S,w,C,P,$[d+13],I,4254626195),P=l(P,S,w,C,$[d+14],O,2792965006),C=l(C,P,S,w,$[d+15],D,1236535329),w=s(w,C,P,S,$[d+1],b,4129170786),S=s(S,w,C,P,$[d+6],M,3225465664),P=s(P,S,w,C,$[d+11],A,643717713),C=s(C,P,S,w,$[d+0],G,3921069994),w=s(w,C,P,S,$[d+5],b,3593408605),S=s(S,w,C,P,$[d+10],M,38016083),P=s(P,S,w,C,$[d+15],A,3634488961),C=s(C,P,S,w,$[d+4],G,3889429448),w=s(w,C,P,S,$[d+9],b,568446438),S=s(S,w,C,P,$[d+14],M,3275163606),P=s(P,S,w,C,$[d+3],A,4107603335),C=s(C,P,S,w,$[d+8],G,1163531501),w=s(w,C,P,S,$[d+13],b,2850285829),S=s(S,w,C,P,$[d+2],M,4243563512),P=s(P,S,w,C,$[d+7],A,1735328473),C=s(C,P,S,w,$[d+12],G,2368359562),w=c(w,C,P,S,$[d+5],E,4294588738),S=c(S,w,C,P,$[d+8],k,2272392833),P=c(P,S,w,C,$[d+11],L,1839030562),C=c(C,P,S,w,$[d+14],x,4259657740),w=c(w,C,P,S,$[d+1],E,2763975236),S=c(S,w,C,P,$[d+4],k,1272893353),P=c(P,S,w,C,$[d+7],L,4139469664),C=c(C,P,S,w,$[d+10],x,3200236656),w=c(w,C,P,S,$[d+13],E,681279174),S=c(S,w,C,P,$[d+0],k,3936430074),P=c(P,S,w,C,$[d+3],L,3572445317),C=c(C,P,S,w,$[d+6],x,76029189),w=c(w,C,P,S,$[d+9],E,3654602809),S=c(S,w,C,P,$[d+12],k,3873151461),P=c(P,S,w,C,$[d+15],L,530742520),C=c(C,P,S,w,$[d+2],x,3299628645),w=p(w,C,P,S,$[d+0],B,4096336452),S=p(S,w,C,P,$[d+7],F,1126891415),P=p(P,S,w,C,$[d+14],q,2878612391),C=p(C,P,S,w,$[d+5],N,4237533241),w=p(w,C,P,S,$[d+12],B,1700485571),S=p(S,w,C,P,$[d+3],F,2399980690),P=p(P,S,w,C,$[d+10],q,4293915773),C=p(C,P,S,w,$[d+1],N,2240044497),w=p(w,C,P,S,$[d+8],B,1873313359),S=p(S,w,C,P,$[d+15],F,4264355552),P=p(P,S,w,C,$[d+6],q,2734768916),C=p(C,P,S,w,$[d+13],N,1309151649),w=p(w,C,P,S,$[d+4],B,4149444226),S=p(S,w,C,P,$[d+11],F,3174756917),P=p(P,S,w,C,$[d+2],q,718787259),C=p(C,P,S,w,$[d+9],N,3951481745),w=a(w,h),C=a(C,m),P=a(P,y),S=a(S,v);var U=g(w)+g(C)+g(P)+g(S);return U.toLowerCase()},shuffleArray=function(e){for(var t,a,n=e.length;n;)a=Math.floor(Math.random()*n--),t=e[n],e[n]=e[a],e[a]=t;return e},landingPageGallery=angular.module("landingPageGallery",["ngRoute","ngAnimate","LocalStorageModule","angular.filter","ngOnload"]);landingPageGallery.config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/main.html",controller:"mainCtrl",controllerAs:"main",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/debug",{templateUrl:"partials/debug.html",controller:"debugCtrl",controllerAs:"debug",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/tag",{templateUrl:"partials/tagtool.html",controller:"tagtoolCtrl",controllerAs:"tagtool",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).when("/:shortCode",{templateUrl:"partials/detail.html",controller:"detailCtrl",controllerAs:"detail",resolve:{appdata:["fetchData",function(e){return e.getCampaigns()}]}}).otherwise({redirectTo:"/"})}]),landingPageGallery.config(["localStorageServiceProvider",function(e){e.setPrefix("webqLPG")}]),landingPageGallery.run(["$rootScope","$timeout","$window","localStorageService",function(e,t,a,n){var r=angular.element(document.getElementById("app-wrapper"));e.division=n.get("division"),e.showDivisionSelect=!1,e.setDivision=function(t){e.division=t,n.set("division",e.division),t&&e.hideDivSel()},e.$on("$routeChangeSuccess",function(){if(e.loadingView===!0){var n=document.getElementById("pageLoad");n.style.opacity="0",t(function(){n.style.display="none",e.loadingView=!1},300)}t(function(){e.division||e.showDivSel()},1500),t(function(){a.scrollTo(0,0)},400)}),e.hideDivSel=function(){r.removeClass("full-blur").addClass("no-blur"),e.showDivisionSelect=!1},e.showDivSel=function(t){e.showDivisionSelect=!0,r.removeClass("no-blur").addClass("full-blur")},e.appName="Landing Page Gallery"}]),landingPageGallery.controller("mainCtrl",["$routeParams","appdata","$filter","$scope","$rootScope","appCache",function(e,t,a,n,r,o){this.filters=o.get("filters");for(var i=t.templates,l=t.campaigns,s=[],c=[],p=[],u=0;u<l.length;u++){var g=a("filter")(i,{id:l[u].templateId})[0];l[u].templateTitle=g.title,s=s.concat(l[u].topic),c=c.concat(l[u].type),p=p.concat(g)}s=a("unique")(s,"toString()"),c=a("unique")(c,"toString()"),p=a("unique")(p,"id"),s=a("orderBy")(s,"toString()"),c=a("orderBy")(c,"toString()"),p=a("orderBy")(p,"title"),this.campaigns=l,this.topics=s,this.types=c,this.templates=p,this.filterResults=function(){var e=a("filter")(l,{$:this.filters.quicksearch});this.campaigns=a("filter")(e,{topic:this.filters.topic||void 0,type:this.filters.type||void 0,templateId:this.filters.templateId||void 0},!0),o.set("filters",this.filters)},this.filterResults(),this.clearSearch=function(){this.campaigns=l;var e=this.filters;Object.keys(e).forEach(function(t,a,n){e[t]=""}),this.filters=e},this.slide=function(e){r.pageTransition=e}}]),landingPageGallery.controller("detailCtrl",["$window","$sce","$routeParams","appdata","$filter","$scope","$rootScope",function(e,t,a,n,r,o,i){var l=n.templates,s=n.campaigns,c=a.shortCode,p=r("filter")(s,{shortCode:c})[0],u=p.templateId,g=r("filter")(l,{id:parseInt(u)},!0)[0],f=r("filter")(s,{templateId:u,shortCode:"!"+c},!0);f=shuffleArray(f),this.iframeURL=t.trustAsResourceUrl(p.url),this.template=g,this.campaign=p,this.otherCampaigns=f,this.renderHTML=function(e){var a=angular.element("<textarea />").html(e).text();return t.trustAsHtml(a)},g.custom?this.customFlag="Custom":this.customFlag="Standard",o.windowWidth=e.innerWidth,angular.element(e).bind("resize",function(){o.windowWidth=e.innerWidth,o.$digest()}),this.slide=function(e){i.pageTransition=e},this.frameLoaded=function(){document.getElementById("campaign-frame").style.display="block",document.getElementById("iframe-loader").style.display="none"}}]),landingPageGallery.controller("debugCtrl",["appdata",function(e){this.templates=e.templates,this.campaigns=e.campaigns,this.printdata=e}]),landingPageGallery.controller("tagtoolCtrl",["appdata",function(e){this.templates=e.templates,this.campaigns=e.campaigns}]),landingPageGallery.factory("fetchData",["$q","$http","$rootScope",function(e,t,a){function n(){var n=e.defer();return o?n.resolve(o):(a.loadingView=!0,a.pageTransition="fadepage",t({method:"GET",url:"http://web-q-hospital.prod.ehc.com/global/webq/report/campaign-pages/campaign-pages.json"}).then(function(e){a.dataFetched=!0,console.log("Data Fetched"),o=e.data;for(var t=0;t<o.campaigns.length;t++)o.campaigns[t].shortCode=MD5(o.campaigns[t].id).substring(0,6);o.campaigns=shuffleArray(o.campaigns),a.$watch("splashFinished",function(){return a.splashFinished?(console.log("Animation Complete"),n.resolve(o)):void 0}),a.$watch("skipIntro",function(){return a.skipIntro?(console.log("Skipping Introduction"),n.resolve(o)):void 0})},function(e){n.reject(e)})),n.promise}function r(){o=null}var o;return{getCampaigns:n,clearCache:r,cache:o}}]),landingPageGallery.factory("cacher",["$cacheFactory",function(e){return e("cacher")}]),landingPageGallery.factory("appCache",["cacher",function(e){return{get:function(t){var a=e.get(t);return a?a:""},set:function(t,a){e.put(t,a)},clear:function(t){e.put(t,"")}}}]),landingPageGallery.directive("splashAnimate",["$rootScope",function(e){return{restrict:"A",link:function(t,a,n){a.on("load",function(){function t(){e.$apply(function(){e.splashFinished=!0,console.log("Intro Played Through")}),e.dataFetched||p.restart()}e.$apply(function(){e.splashFinished=!1,e.showLoadText=!0});var a=this.contentDocument,n=a.getElementsByClassName("cir"),r=a.getElementsByClassName("icon-wrap"),o=a.getElementsByClassName("title"),i=a.getElementsByClassName("sub"),l=.8,s="-="+7*l/10,c="-="+1*l/2,p=new TimelineMax({repeat:0,yoyo:!1,repeatDelay:l,onComplete:t});p.to(n[0],l,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(r[0],.4*l,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},s),p.to(o[0],.4*l,{opacity:"1",ease:Power1.easeIn},s),p.to(i[0],.4*l,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[0],i[0]],.5*l,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*l),p.appendMultiple(TweenMax.allTo([n[0],r[0]],1.5*l,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),p.to(n[1],l,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(r[1],.4*l,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},s),p.to(o[1],.4*l,{opacity:"1",ease:Power1.easeIn},s),p.to(i[1],.4*l,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[1],i[1]],.5*l,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*l),p.appendMultiple(TweenMax.allTo([n[1],r[1]],1.5*l,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),p.to(n[2],l,{rotation:"360",transformOrigin:"50% 50%",strokeDashoffset:"200",ease:Power1.easeOut}),p.fromTo(r[2],.4*l,{opacity:"0",y:"5",transformOrigin:"50% 50%"},{opacity:"1",y:"0",transformOrigin:"50% 50%",ease:Power1.easeOut},s),p.to(o[2],.4*l,{opacity:"1",ease:Power1.easeIn},s),p.to(i[2],.4*l,{opacity:"1",ease:Power1.easeIn}),p.appendMultiple(TweenMax.allTo([o[2],i[2]],.5*l,{opacity:"0",transformOrigin:"50% 50%",ease:Linear.EaseNone}),1.5*l),p.appendMultiple(TweenMax.allTo([n[2],r[2]],1.5*l,{opacity:"0",y:"10",transformOrigin:"50% 50%",ease:Power1.easeIn}),c),e.$watch("skipIntro",function(){e.skipIntro&&(p.stop(),console.log("Stopping Animation"))})})}}}]);